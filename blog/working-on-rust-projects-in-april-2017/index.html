<!DOCTYPE html>
<html lang="en-gb">
    <head>
      <meta charset="UTF-8">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="
    Progress of my Rust projects in April 2017
">
      <meta name="author" content="Vincent Prouillet">
      <title>Vincent Prouillet: Developer &amp; Entrepreneur</title>
      <link rel="stylesheet" href="https://www.vincentprouillet.com/site.css?h=6dba58370284a334effb" />
      <link rel="shortcut icon" type="image/png" href="https://www.vincentprouillet.com/favicon.ico"/>
      <link href="https://www.vincentprouillet.com/rss.xml" rel="feed" type="application/rss+xml" title="Vincent Prouillet: Developer &amp; Entrepreneur" />
    </head>

    <header id="header">
        <h1 class="logo"><a href="/">Vincent Prouillet</a></h1>
        <ul>
            <li><a href="/blog/">Blog</a></li>
        </ul>
    </header>

    <div id="content">
        
    <div class="post">
        <div class="post__title">
            <h1>This month in my Rust projects</h1>
            <div class="post__meta">
                2017-04-23
                
            </div>
            <hr />
        </div>

        <div class="post__body">
            <p>I have just released v2 of <a href="https://github.com/Keats/jsonwebtoken">jsonwebtoken</a> and
thought a blog post would be a good way to talk about the progress of jsonwebtoken, Tera and Gutenberg this month.</p>
<h2 id="jsonwebtoken">jsonwebtoken<a class="zola-anchor" href="#jsonwebtoken" aria-label="Anchor link for: jsonwebtoken">ðŸ”—</a></h2>
<p>Version 2 is almost a full rewrite, but trying to keep the UX as good as possible.</p>
<p>The following improvements have been made:</p>
<ul>
<li>use <code>serde</code> instead of <code>rustc_serialize</code>: no brainer as <code>serde</code> is now usable on stable and reached 1.0.0</li>
<li>RSA signing and verification</li>
<li>Validation</li>
</ul>
<p>Validation is the main thing that was missing from version 1 and brings <code>jsonwebtoken</code> to almost parity with libraries
in other languages. It is detailed <a href="https://github.com/Keats/jsonwebtoken#validation">in the README</a>.</p>
<p>As an aside, the signature of <code>decode</code> is an example of why I would like to have default arguments in functions.
The signature is:</p>
<pre data-lang="rust" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#668f14;">pub fn </span><span style="color:#c23f31;">decode</span><span>&lt;T: DeserializeOwned&gt;(
</span><span>    </span><span style="color:#5597d6;">token</span><span>: </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">str</span><span>,
</span><span>    </span><span style="color:#5597d6;">key</span><span>: </span><span style="color:#72ab00;">&amp;</span><span>[</span><span style="color:#668f14;">u8</span><span>],
</span><span>    </span><span style="color:#5597d6;">validation</span><span>: </span><span style="color:#72ab00;">&amp;</span><span>Validation
</span><span>) -&gt; </span><span style="color:#a2a001;">Result</span><span>&lt;TokenData&lt;T&gt;&gt;
</span></code></pre>
<p>But I expect <code>Validation</code> to be the default most of the time so the ideal signature would be something like:</p>
<pre data-lang="rust" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#668f14;">pub fn </span><span style="color:#c23f31;">decode</span><span>&lt;T: DeserializeOwned&gt;(
</span><span>    </span><span style="color:#5597d6;">token</span><span>: </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">str</span><span>,
</span><span>    </span><span style="color:#5597d6;">key</span><span>: </span><span style="color:#72ab00;">&amp;</span><span>[</span><span style="color:#668f14;">u8</span><span>],
</span><span>    validation = </span><span style="color:#72ab00;">&amp;</span><span style="color:#668f14;">Validation::</span><span>default() </span><span style="color:#7f8989;">// or whatever the syntax would be
</span><span>) -&gt; </span><span style="color:#a2a001;">Result</span><span>&lt;TokenData&lt;T&gt;&gt;
</span></code></pre>
<p>And using <code>decode</code> would be cleaner (at least for me):</p>
<pre data-lang="rust" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b39f04;">decode</span><span>(</span><span style="color:#72ab00;">&amp;</span><span>token, </span><span style="color:#d07711;">&quot;key&quot;</span><span>, </span><span style="color:#72ab00;">&amp;</span><span>Validation::default());
</span><span style="color:#7f8989;">// VS
</span><span style="color:#b39f04;">decode</span><span>(</span><span style="color:#72ab00;">&amp;</span><span>token, </span><span style="color:#d07711;">&quot;key&quot;</span><span>);
</span></code></pre>
<p>There is a <a href="https://internals.rust-lang.org/t/pre-rfc-named-arguments/3831/234">pre RFC</a> but not much progress has
been made recently.</p>
<p>Thanks a lot to <a href="https://github.com/mike-engel">Mike Engel</a> for all the feedback!</p>
<h2 id="tera">Tera<a class="zola-anchor" href="#tera" aria-label="Anchor link for: tera">ðŸ”—</a></h2>
<blockquote>
<p><a href="https://github.com/Keats/tera">Tera</a> is a template engine based on Jinja2/Django templates</p>
</blockquote>
<p>Tera has gone through 2 versions in April: 0.9.0 and now 0.10.</p>
<p>0.9 fixed a major bug on Windows and 0.10 updated <code>serde</code> to 1.0, no major changes otherwise: Tera is pretty stable now.</p>
<h2 id="gutenberg">Gutenberg<a class="zola-anchor" href="#gutenberg" aria-label="Anchor link for: gutenberg">ðŸ”—</a></h2>
<blockquote>
<p><a href="https://github.com/Keats/gutenberg">Gutenberg</a> is a static site engine</p>
</blockquote>
<p>Lots of progress this month on Gutenberg!</p>
<p>A short list of the biggest new features:</p>
<ul>
<li>Shortcodes inspired by <a href="https://gohugo.io/extras/shortcodes/">Hugo</a></li>
<li>Relative links to your own content: <code>[my last article](./posts/an-article.md)</code></li>
<li>Anchors for titles with an option to insert some HTML to allow behaviour similar to the Github READMEs</li>
<li>Works on Windows!</li>
</ul>
<p>Next up is <a href="https://github.com/Keats/gutenberg/issues/14">sorting by weight/order</a> and finishing up
<a href="https://github.com/Keats/gutenberg/issues/7">pagination</a>.</p>
<p>Once those features are in, I will probably spend some time making an actual documentation site to ensure it works for sites
more complex than this blog.</p>
<p>If anyone is knowledgeable about <a href="http://livereload.com/">Live Reload</a>, I'd like some help tracking down <a href="https://github.com/Keats/gutenberg/issues/10">this issue</a>.</p>
<p>Solving <a href="https://github.com/trishume/syntect/issues/20">this issue in Syntect</a> would also help but I don't have time/motivation for it myself right now.</p>
<p>Otherwise, Gutenberg mostly needs feedback and even feature request for things I didn't consider yet.</p>

        </div>
    </div>

    </div>

  <body>
  </body>
</html>
