<!DOCTYPE html>
<html lang="en-gb">
    <head>
      <meta charset="UTF-8">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="
    Release of gulp-sass v2 and what it means
">
      <meta name="author" content="Vincent Prouillet">
      <title>Vincent Prouillet: Developer &amp; Entrepreneur</title>
      <link rel="stylesheet" href="https://www.vincentprouillet.com/site.css?h=6dba58370284a334effb" />
      <link rel="shortcut icon" type="image/png" href="https://www.vincentprouillet.com/favicon.ico"/>
      <link href="https://www.vincentprouillet.com/rss.xml" rel="feed" type="application/rss+xml" title="Vincent Prouillet: Developer &amp; Entrepreneur" />
    </head>

    <header id="header">
        <h1 class="logo"><a href="/">Vincent Prouillet</a></h1>
        <ul>
            <li><a href="/blog/">Blog</a></li>
        </ul>
    </header>

    <div id="content">
        
    <div class="post">
        <div class="post__title">
            <h1>Release of gulp-sass v2</h1>
            <div class="post__meta">
                2015-05-07
                
            </div>
            <hr />
        </div>

        <div class="post__body">
            <p><a href="https://github.com/dlmanning/gulp-sass">gulp-sass</a> v2 was released today!
In itself, this is not a big change as this is simply a wrapper for node-sass which uses libsass so, while this version is a complete rewrite this is not the important news. The important news is that it ships with <a href="https://github.com/sass/node-sass">node-sass</a> v3 which is using <a href="http://libsass.org/">libsass</a> 3.2.2.</p>
<p>We will see in a short moment why it is exciting but first a small explanation on what is sass and libsass.</p>
<p><strong>TL;DR</strong>:</p>
<pre data-lang="bash" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#5597d6;">$</span><span> rm</span><span style="color:#5597d6;"> -rf</span><span> node_modules/gulp-sass/
</span><span style="color:#5597d6;">$</span><span> npm install gulp-sass</span><span style="color:#5597d6;"> --save-dev
</span><span style="color:#5597d6;">//</span><span> enjoy nearly full sass compatibility
</span></code></pre>
<h2 id="sass">Sass<a class="zola-anchor" href="#sass" aria-label="Anchor link for: sass">ðŸ”—</a></h2>
<p>Nowadays, most front-end developers and designers use CSS preprocessors to immensely simplify their work.
A CSS preprocessor brings variables, nesting, mixins, functions and other things to CSS.  Let's see a short example of why we would use one, in this case using variables for colours:</p>
<pre data-lang="css" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-css "><code class="language-css" data-lang="css"><span style="color:#9b703f;">.header </span><span>{
</span><span>  </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#ca7840;">#484c55</span><span>;
</span><span>}
</span><span>
</span><span style="color:#9b703f;">.header .title </span><span>{
</span><span>  </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#ca7840;">#5a5d66</span><span>; </span><span style="color:#7f8989;">/* 10% lighter than #484c55 */
</span><span>}
</span><span>
</span><span style="color:#9b703f;">.header .title .logo </span><span>{
</span><span>  </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#ca7840;">#484c55</span><span>;
</span><span>}
</span></code></pre>
<p>And in Sass:</p>
<pre data-lang="sass" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-sass "><code class="language-sass" data-lang="sass"><span style="color:#7f8989;">// functions.scss
</span><span style="color:#7f8989;">/// Slightly lighten a color
</span><span style="color:#72ab00;">@function </span><span style="color:#c23f31;">tint</span><span>(</span><span style="color:#5597d6;">$color</span><span>, </span><span style="color:#5597d6;">$percentage</span><span>) {
</span><span>  </span><span style="color:#72ab00;">@return </span><span style="color:#b39f04;">mix</span><span>(</span><span style="color:#d07711;">white</span><span>, </span><span style="color:#5597d6;">$color</span><span>, </span><span style="color:#5597d6;">$percentage</span><span>)</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span style="background-color:#562d56bf;color:#f8f8f8;">}</span><span>
</span><span>
</span><span style="color:#7f8989;">// colors.scss
</span><span style="color:#72ab00;">@import </span><span style="color:#d07711;">&quot;functions&quot;</span><span>;
</span><span>
</span><span style="color:#5597d6;">$header-background</span><span>: </span><span style="color:#ca7840;">#484c55</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span style="color:#5597d6;">$header-title-background</span><span>: </span><span style="color:#b39f04;">tint</span><span>(</span><span style="color:#5597d6;">$header-background</span><span>, </span><span style="color:#ca7840;">10</span><span style="color:#72ab00;">%</span><span>)</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span>
</span><span style="color:#7f8989;">// header.scss
</span><span style="color:#72ab00;">@import </span><span style="color:#d07711;">&quot;colors&quot;</span><span>;
</span><span>
</span><span style="color:#9b703f;">.header </span><span style="background-color:#562d56bf;color:#f8f8f8;">{</span><span>
</span><span>  </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#5597d6;">$header-background</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span>
</span><span>  </span><span style="color:#9b703f;">.title </span><span style="background-color:#562d56bf;color:#f8f8f8;">{</span><span>
</span><span>    </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#5597d6;">$header-title-background</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span>
</span><span>    </span><span style="color:#9b703f;">.logo </span><span style="background-color:#562d56bf;color:#f8f8f8;">{</span><span>
</span><span>      </span><span style="color:#c5af75;">background</span><span>: </span><span style="color:#5597d6;">$header-background</span><span style="background-color:#562d56bf;color:#f8f8f8;">;</span><span>
</span><span>    </span><span style="background-color:#562d56bf;color:#f8f8f8;">}</span><span>
</span><span>  </span><span style="background-color:#562d56bf;color:#f8f8f8;">}</span><span>
</span><span style="background-color:#562d56bf;color:#f8f8f8;">}</span><span>
</span></code></pre>
<blockquote>
<p>The above ignores best practices about naming/nesting/specificity of selectors for the sake of example.</p>
</blockquote>
<p>While the Sass version is longer, it makes your CSS more readable, easy to organise and consistent. This is only a tiny part of what CSS preprocessors but it hopefully gives you an idea on why they are extremely useful.</p>
<p><a href="http://sass-lang.com/">Sass</a> is one of them. There is also <a href="http://lesscss.org/">less</a>, <a href="http://learnboost.github.io/stylus/">stylus</a> and a few others but I personally use Sass so I will be talking about that.</p>
<p>Sass is written in Ruby, which means that Ruby is now needed to build your frontend. Ruby is also not the fastest programming language around and the compilation was taking more than 10 seconds for some large projects, which is not really sustainable when working.</p>
<h2 id="here-comes-a-new-challenger">Here comes a new challenger<a class="zola-anchor" href="#here-comes-a-new-challenger" aria-label="Anchor link for: here-comes-a-new-challenger">ðŸ”—</a></h2>
<p><a href="https://github.com/akhleung">Aaron Leung</a> started porting the Sass compiler to C/C++.
Lots of people (including me) started playing with it and were impressed by the compilation time an order of magnitude faster than sass but quickly realized that lots of features were not implemented yet, for example <a href="http://benfrain.com/libsass-lightning-fast-sass-compiler-ready-prime-time/">this article</a>. While it was usable for some projects, it could not be a drop-in replacement for most people as you would have to use workarounds for some features and not use some others at all or were using frameworks like Bourbon or earlier versions of Foundation.</p>
<p><a href="https://twitter.com/HugoGiraudel">Hugo Giraudel</a> started a website called <a href="http://sass-compatibility.github.io/">Sass Compatibility</a> to keep track of those incompatibilities.
As mentioned in the introduction, gulp-sass is now using libsass 3.2.2 while it was using 2.0 before and the results of that website look pretty damn good !
Most features are supported except for selector manipulation and string functions, both of which I didn't even know existed in the first place.</p>
<h2 id="gulp-sass">gulp-sass<a class="zola-anchor" href="#gulp-sass" aria-label="Anchor link for: gulp-sass">ðŸ”—</a></h2>
<p>As mentioned in the introduction, gulp-sass has been rewritten and it means that your existing tasks won't work.
Here's how to update your gulpfile (from the README):</p>
<pre data-lang="javascript" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-javascript "><code class="language-javascript" data-lang="javascript"><span style="color:#7f8989;">// gulp-sass 1.3.3 task
</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">task</span><span>(</span><span style="color:#d07711;">&#39;sass&#39;</span><span>, </span><span style="color:#668f14;">function </span><span>() {
</span><span>    </span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">src</span><span>(</span><span style="color:#d07711;">&#39;./scss/*.scss&#39;</span><span>)
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#c23f31;">sass</span><span>({errLogToConsole: </span><span style="color:#b3933a;">true</span><span>}))
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">dest</span><span>(</span><span style="color:#d07711;">&#39;./css&#39;</span><span>));
</span><span>});
</span><span>
</span><span style="color:#7f8989;">// gulp-sass 2.0 task
</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">task</span><span>(</span><span style="color:#d07711;">&#39;sass&#39;</span><span>, </span><span style="color:#668f14;">function </span><span>() {
</span><span>    </span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">src</span><span>(</span><span style="color:#d07711;">&#39;./scss/*.scss&#39;</span><span>)
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#c23f31;">sass</span><span>().</span><span style="color:#c23f31;">on</span><span>(</span><span style="color:#d07711;">&#39;error&#39;</span><span>, </span><span style="color:#5597d6;">sass</span><span>.</span><span style="color:#5597d6;">logError</span><span>))
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">plugins</span><span>.</span><span style="color:#c23f31;">autoprefixer</span><span>())
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">dest</span><span>(</span><span style="color:#d07711;">&#39;./css&#39;</span><span>));
</span><span>});
</span><span>
</span><span style="color:#7f8989;">// gulp-sass 2.0 synchronous compilation task
</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">task</span><span>(</span><span style="color:#d07711;">&#39;sass&#39;</span><span>, </span><span style="color:#668f14;">function </span><span>() {
</span><span>    </span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">src</span><span>(</span><span style="color:#d07711;">&#39;./scss/*.scss&#39;</span><span>)
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">sass</span><span>.</span><span style="color:#c23f31;">sync</span><span>().</span><span style="color:#c23f31;">on</span><span>(</span><span style="color:#d07711;">&#39;error&#39;</span><span>, </span><span style="color:#5597d6;">sass</span><span>.</span><span style="color:#5597d6;">logError</span><span>))
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">plugins</span><span>.</span><span style="color:#c23f31;">autoprefixer</span><span>())
</span><span>        .</span><span style="color:#c23f31;">pipe</span><span>(</span><span style="color:#5597d6;">gulp</span><span>.</span><span style="color:#c23f31;">dest</span><span>(</span><span style="color:#d07711;">&#39;./css&#39;</span><span>));
</span><span>});
</span></code></pre>
<p>Any options passed to gulp-sass will be passed down to node-sass, there is no gulp-sass specific options.</p>
<p>As a general advice, I would recommend using <a href="https://github.com/sindresorhus/gulp-autoprefixer">gulp-autoprefixer</a> along as it simplifies your Sass even more since you don't have to worry about browsers prefixes and flexbox syntaxes.</p>
<p>There are already issues open on gulp-sass but if you encounter problems (except installations errors, those are most likely node-sass), please open an issue on <a href="https://github.com/dlmanning/gulp-sass/issues">https://github.com/dlmanning/gulp-sass/issues</a> so we can have a look !
There was over 45k downloads of gulp-sass on npm last week so spread the word about that new version and it might be a good time to try replacing your Ruby Sass!</p>
<p>As an aside, if you are writing Sass I heavily recommend reading those <a href="http://sass-guidelin.es/">guidelines</a> as they are really good and well detailed.
The only thing missing for me now in the Sass ecosystem is a Ruby-free linter (sounds like a fun Rust learning project).</p>

        </div>
    </div>

    </div>

  <body>
  </body>
</html>
