<!DOCTYPE html>
<html lang="en-gb">
    <head>
      <meta charset="UTF-8">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="
    Looking how they differ by data
">
      <meta name="author" content="Vincent Prouillet">
      <title>Vincent Prouillet: Developer &amp; Entrepreneur</title>
      <link rel="stylesheet" href="https://www.vincentprouillet.com/site.css?h=6dba58370284a334effb" />
      <link rel="shortcut icon" type="image/png" href="https://www.vincentprouillet.com/favicon.ico"/>
      <link href="https://www.vincentprouillet.com/rss.xml" rel="feed" type="application/rss+xml" title="Vincent Prouillet: Developer &amp; Entrepreneur" />
    </head>

    <header id="header">
        <h1 class="logo"><a href="/">Vincent Prouillet</a></h1>
        <ul>
            <li><a href="/blog/">Blog</a></li>
        </ul>
    </header>

    <div id="content">
        
    <div class="post">
        <div class="post__title">
            <h1>Comparing weathers in places I've lived</h1>
            <div class="post__meta">
                2015-05-22
                
            </div>
            <hr />
        </div>

        <div class="post__body">
            <pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#72ab00;">%</span><span>matplotlib inline
</span><span>
</span><span style="color:#72ab00;">import </span><span>datetime
</span><span style="color:#72ab00;">import </span><span>matplotlib.pyplot </span><span style="color:#72ab00;">as </span><span>plt
</span><span style="color:#72ab00;">import </span><span>numpy </span><span style="color:#72ab00;">as </span><span>np
</span><span style="color:#72ab00;">import </span><span>pandas </span><span style="color:#72ab00;">as </span><span>pd
</span><span style="color:#72ab00;">import </span><span>seaborn  </span><span style="color:#7f8989;"># make charts prettier and more readable
</span></code></pre>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#7f8989;"># Let&#39;s load one of the CSV to see what they look like
</span><span>nice </span><span style="color:#72ab00;">= </span><span>pd.</span><span style="color:#5597d6;">read_csv</span><span>(</span><span style="color:#d07711;">&#39;nice.csv&#39;</span><span>)
</span><span>nice[:</span><span style="color:#b3933a;">5</span><span>]
</span></code></pre>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-2011</td>
      <td>8.6</td>
      <td>4.8</td>
      <td>12.4</td>
      <td>67.0</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02-2011</td>
      <td>9.3</td>
      <td>7.1</td>
      <td>11.1</td>
      <td>69.1</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>03-2011</td>
      <td>11.7</td>
      <td>7.8</td>
      <td>14.3</td>
      <td>67.0</td>
      <td>3.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04-2011</td>
      <td>15.6</td>
      <td>13.3</td>
      <td>18.5</td>
      <td>67.4</td>
      <td>0.4</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>05-2011</td>
      <td>19.7</td>
      <td>16.6</td>
      <td>24.8</td>
      <td>60.6</td>
      <td>0.0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>We can see the shape of our CSV files.
There are 8 columns, all pretty explicit and containing the average for the month in column month except for raindays and snowdays which contains the number of days in that month where it rained and snowed respectively.</p>
<p>Note: I currently count raindays as the number of days where the rainfall is above 5mm (which is completely arbitrary).
If you look at the website I scraped it does contain a column for rain days  but some days are marked as rain days when there is no rainfall and the reverse.
Even then it's not really accurate as I'm only interested in quality of life and rain at 4am is not annoying lots of people.</p>
<p>Cool. Let's try plotting something first to see if everything is okay and load the other cities.</p>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>nice[</span><span style="color:#d07711;">&#39;avg_temp&#39;</span><span>].</span><span style="color:#5597d6;">plot</span><span>(</span><span style="color:#5597d6;">figsize</span><span style="color:#72ab00;">=</span><span>(</span><span style="color:#b3933a;">15</span><span>, </span><span style="color:#b3933a;">5</span><span>))
</span></code></pre>
<div class="post__image">
    <a href="https://www.vincentprouillet.com/blog/comparing-weathers/weather_3_0.png" class="image-link" target="_blank">
        <img src="https://www.vincentprouillet.com/blog/comparing-weathers/weather_3_0.png" alt="Average temperature in Nice">
    </a>
</div>
<p>While we could continue having one <code>DataFrame</code> per city, it is more convenient to have one <code>DataFrame</code> containing all the data as this allows us to use plotting directly from it like we did above.</p>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span>locations </span><span style="color:#72ab00;">= </span><span>[</span><span style="color:#d07711;">&#39;nice&#39;</span><span>, </span><span style="color:#d07711;">&#39;montreal&#39;</span><span>, </span><span style="color:#d07711;">&#39;okinawa&#39;</span><span>, </span><span style="color:#d07711;">&#39;london&#39;</span><span>]
</span><span>weather </span><span style="color:#72ab00;">= </span><span>pd.</span><span style="color:#5597d6;">DataFrame</span><span>()
</span><span>
</span><span style="color:#72ab00;">for </span><span>location </span><span style="color:#72ab00;">in </span><span>locations:
</span><span>    frame </span><span style="color:#72ab00;">= </span><span>pd.</span><span style="color:#5597d6;">read_csv</span><span>(</span><span style="color:#d07711;">&#39;</span><span style="color:#aeb52b;">%s</span><span style="color:#d07711;">.csv&#39; </span><span style="color:#72ab00;">% </span><span>location)
</span><span>    </span><span style="color:#7f8989;"># We need to keep track of where it&#39;s coming from obviously
</span><span>    frame[</span><span style="color:#d07711;">&#39;location&#39;</span><span>] </span><span style="color:#72ab00;">= </span><span>location
</span><span>    weather </span><span style="color:#72ab00;">= </span><span>weather.</span><span style="color:#5597d6;">append</span><span>(frame)
</span><span>
</span><span style="color:#7f8989;"># Alternative to using slicing
</span><span>weather.</span><span style="color:#5597d6;">head</span><span>()
</span></code></pre>
<div class="contained" style="max-height:1000px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
      <th>location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-2011</td>
      <td>8.6</td>
      <td>4.8</td>
      <td>12.4</td>
      <td>67.0</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02-2011</td>
      <td>9.3</td>
      <td>7.1</td>
      <td>11.1</td>
      <td>69.1</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>2</th>
      <td>03-2011</td>
      <td>11.7</td>
      <td>7.8</td>
      <td>14.3</td>
      <td>67.0</td>
      <td>3.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04-2011</td>
      <td>15.6</td>
      <td>13.3</td>
      <td>18.5</td>
      <td>67.4</td>
      <td>0.4</td>
      <td>1</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>4</th>
      <td>05-2011</td>
      <td>19.7</td>
      <td>16.6</td>
      <td>24.8</td>
      <td>60.6</td>
      <td>0.0</td>
      <td>0</td>
      <td>0</td>
      <td>nice</td>
    </tr>
  </tbody>
</table>
</div>
<p>We can also use <code>.describe()</code> on a <code>DataFrame</code> instead of doing <code>.median()</code>, <code>.sum()</code> etc on every single column to have a quick overview of all the variables.</p>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span>weather.</span><span style="color:#5597d6;">describe</span><span>()
</span></code></pre>
<div class="contained" style="max-height:1000px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>14.698437</td>
      <td>9.718750</td>
      <td>19.635937</td>
      <td>70.260937</td>
      <td>3.507292</td>
      <td>4.843750</td>
      <td>2.114583</td>
    </tr>
    <tr>
      <th>std</th>
      <td>9.001405</td>
      <td>11.141769</td>
      <td>7.269971</td>
      <td>7.409749</td>
      <td>3.491553</td>
      <td>3.241834</td>
      <td>5.640857</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-10.000000</td>
      <td>-24.900000</td>
      <td>1.600000</td>
      <td>54.200000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>9.150000</td>
      <td>4.650000</td>
      <td>13.950000</td>
      <td>65.300000</td>
      <td>1.400000</td>
      <td>2.750000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>16.250000</td>
      <td>11.950000</td>
      <td>20.950000</td>
      <td>69.750000</td>
      <td>2.700000</td>
      <td>5.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>21.025000</td>
      <td>16.600000</td>
      <td>25.225000</td>
      <td>74.800000</td>
      <td>3.900000</td>
      <td>7.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>29.600000</td>
      <td>28.400000</td>
      <td>30.700000</td>
      <td>87.500000</td>
      <td>22.000000</td>
      <td>15.000000</td>
      <td>25.000000</td>
    </tr>
  </tbody>
</table>
</div>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#7f8989;"># Define some styles that we will reuse for all line graphs
</span><span>styles </span><span style="color:#72ab00;">= </span><span>{
</span><span>    </span><span style="color:#d07711;">&#39;london&#39;</span><span>: </span><span style="color:#d07711;">&#39;go-&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;nice&#39;</span><span>: </span><span style="color:#d07711;">&#39;ro-&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;montreal&#39;</span><span>: </span><span style="color:#d07711;">&#39;bo-&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;okinawa&#39;</span><span>: </span><span style="color:#d07711;">&#39;co-&#39;</span><span>,
</span><span>}
</span><span>
</span><span style="color:#7f8989;"># we define a method since we will need to do that pretty often
</span><span style="color:#72ab00;">def </span><span style="color:#c23f31;">plot_grouped_by</span><span>(</span><span style="color:#5597d6;">dataframe</span><span>, </span><span style="color:#5597d6;">column_name</span><span>):
</span><span>    </span><span style="color:#7f8989;">&quot;&quot;&quot;Plots the dataframe grouped by location for the given column&quot;&quot;&quot;
</span><span>    </span><span style="color:#7f8989;"># Need to use the month as the index
</span><span>    locations </span><span style="color:#72ab00;">= </span><span>dataframe.</span><span style="color:#5597d6;">set_index</span><span>(</span><span style="color:#d07711;">&#39;month&#39;</span><span>).</span><span style="color:#5597d6;">groupby</span><span>(</span><span style="color:#d07711;">&#39;location&#39;</span><span>)
</span><span>
</span><span>    </span><span style="color:#72ab00;">for </span><span>loc_name, loc </span><span style="color:#72ab00;">in </span><span>locations:
</span><span>        loc[column_name].</span><span style="color:#5597d6;">plot</span><span>(</span><span style="color:#5597d6;">x</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&#39;month&#39;</span><span>, </span><span style="color:#5597d6;">label</span><span style="color:#72ab00;">=</span><span style="color:#a2a001;">str</span><span>(loc_name), </span><span style="color:#5597d6;">style</span><span style="color:#72ab00;">=</span><span>styles[</span><span style="color:#a2a001;">str</span><span>(loc_name)])
</span><span>
</span><span>
</span><span>plt.</span><span style="color:#5597d6;">figure</span><span>(</span><span style="color:#5597d6;">figsize</span><span style="color:#72ab00;">=</span><span>(</span><span style="color:#b3933a;">16</span><span>, </span><span style="color:#b3933a;">8</span><span>))
</span><span>ax </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">111</span><span>)
</span><span>
</span><span style="color:#5597d6;">plot_grouped_by</span><span>(weather, </span><span style="color:#d07711;">&#39;avg_temp&#39;</span><span>)
</span><span>
</span><span style="color:#7f8989;"># Yes, I did add the 40 degrees tick just to be able to fit the legend properly
</span><span>plt.</span><span style="color:#5597d6;">yticks</span><span>([</span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">15</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">5</span><span>, </span><span style="color:#b3933a;">0</span><span>, </span><span style="color:#b3933a;">5</span><span>, </span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#b3933a;">15</span><span>, </span><span style="color:#b3933a;">20</span><span>, </span><span style="color:#b3933a;">25</span><span>, </span><span style="color:#b3933a;">30</span><span>, </span><span style="color:#b3933a;">40</span><span>], </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;upper left&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Monthly average temperature 2011-2014&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Temperature (celsius)&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">xlabel</span><span>(</span><span style="color:#d07711;">&quot;Time&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span></code></pre>
<div class="post__image">
    <a href="https://www.vincentprouillet.com/blog/comparing-weathers/weather_8_0.png" class="image-link" target="_blank">
        <img src="https://www.vincentprouillet.com/blog/comparing-weathers/weather_8_0.png" alt="Monthly average temperatures">
    </a>
</div>
<p>We can make a few observations on this chart:</p>
<ul>
<li>Montreal has the biggest variance in temperature throughout the year: from very cold in winter to quite warm in summer</li>
<li>London is disappointingly average and is missing at least 10° on its summer time for my taste</li>
<li>Okinawa is hot, even winter is warmer than London's summer most of the time</li>
<li>Nice has a nice weather, hot in summer but not too cold in winter</li>
</ul>
<p>For the next plots, let's focus on 2014 only in order to have an idea on how a year looks like in those cities.</p>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#7f8989;"># Making sure we have a datetime first rather than a string
</span><span>weather[</span><span style="color:#d07711;">&#39;month&#39;</span><span>] </span><span style="color:#72ab00;">= </span><span>pd.</span><span style="color:#5597d6;">to_datetime</span><span>(weather[</span><span style="color:#d07711;">&#39;month&#39;</span><span>], </span><span style="color:#5597d6;">format</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;</span><span style="color:#aeb52b;">%m</span><span style="color:#d07711;">-</span><span style="color:#aeb52b;">%Y</span><span style="color:#d07711;">&quot;</span><span>)
</span><span>start </span><span style="color:#72ab00;">= </span><span>datetime.</span><span style="color:#5597d6;">date</span><span>(</span><span style="color:#b3933a;">2014</span><span>, </span><span style="color:#b3933a;">1</span><span>, </span><span style="color:#b3933a;">1</span><span>)
</span><span>
</span><span style="color:#7f8989;"># pandas allows all kind of iterator magic
</span><span>weather_2014 </span><span style="color:#72ab00;">= </span><span>weather[weather.month </span><span style="color:#72ab00;">&gt;= </span><span>start]
</span><span>weather_2014.</span><span style="color:#5597d6;">head</span><span>()
</span></code></pre>
<div class="contained" style="max-height:1000px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
      <th>location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>36</th>
      <td>2014-01-01</td>
      <td>9.7</td>
      <td>6.4</td>
      <td>12.4</td>
      <td>71.6</td>
      <td>9.2</td>
      <td>11</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>37</th>
      <td>2014-02-01</td>
      <td>9.9</td>
      <td>6.8</td>
      <td>13.4</td>
      <td>69.6</td>
      <td>4.6</td>
      <td>7</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>38</th>
      <td>2014-03-01</td>
      <td>12.5</td>
      <td>7.4</td>
      <td>15.4</td>
      <td>62.3</td>
      <td>2.7</td>
      <td>3</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>39</th>
      <td>2014-04-01</td>
      <td>15.3</td>
      <td>13.2</td>
      <td>17.3</td>
      <td>69.3</td>
      <td>0.3</td>
      <td>0</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>40</th>
      <td>2014-05-01</td>
      <td>17.5</td>
      <td>14.4</td>
      <td>20.2</td>
      <td>64.1</td>
      <td>0.6</td>
      <td>1</td>
      <td>0</td>
      <td>nice</td>
    </tr>
  </tbody>
</table>
</div>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#7f8989;"># Let&#39;s look at temperatures and humidity
</span><span>plt.</span><span style="color:#5597d6;">figure</span><span>(</span><span style="color:#5597d6;">figsize</span><span style="color:#72ab00;">=</span><span>(</span><span style="color:#b3933a;">16</span><span>, </span><span style="color:#b3933a;">8</span><span>))
</span><span>
</span><span style="color:#7f8989;"># this 221 means we want a 2x2 plots display and this is the first one
</span><span style="color:#7f8989;"># (so upper left)
</span><span>ax </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">221</span><span>)
</span><span>
</span><span style="color:#5597d6;">plot_grouped_by</span><span>(weather_2014, </span><span style="color:#d07711;">&#39;avg_temp&#39;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">yticks</span><span>([</span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">15</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">5</span><span>, </span><span style="color:#b3933a;">0</span><span>, </span><span style="color:#b3933a;">5</span><span>, </span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#b3933a;">15</span><span>, </span><span style="color:#b3933a;">20</span><span>, </span><span style="color:#b3933a;">25</span><span>, </span><span style="color:#b3933a;">30</span><span>, </span><span style="color:#b3933a;">35</span><span>], </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;lower center&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Monthly average temperature 2014&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Temperature (celsius)&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span>
</span><span>ax2 </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">222</span><span>)
</span><span>
</span><span style="color:#5597d6;">plot_grouped_by</span><span>(weather_2014, </span><span style="color:#d07711;">&#39;max_temp&#39;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">yticks</span><span>([</span><span style="color:#b3933a;">0</span><span>, </span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#b3933a;">20</span><span>, </span><span style="color:#b3933a;">30</span><span>, </span><span style="color:#b3933a;">40</span><span>], </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;lower center&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Max temperature 2014&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Temperature (celsius)&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span>
</span><span>ax3 </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">223</span><span>)
</span><span>
</span><span style="color:#5597d6;">plot_grouped_by</span><span>(weather_2014, </span><span style="color:#d07711;">&#39;min_temp&#39;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">yticks</span><span>([</span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">30</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">20</span><span>, </span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#b3933a;">0</span><span>, </span><span style="color:#b3933a;">10</span><span>, </span><span style="color:#b3933a;">20</span><span>, </span><span style="color:#b3933a;">30</span><span>], </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;lower center&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Min temperature 2014&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Temperature (celsius)&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span>
</span><span>ax4 </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">224</span><span>)
</span><span>
</span><span style="color:#5597d6;">plot_grouped_by</span><span>(weather_2014, </span><span style="color:#d07711;">&#39;humidity&#39;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Average monthly humidity </span><span style="color:#aeb52b;">% i</span><span style="color:#d07711;">n 2014 (legend identical)&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Humidity %&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span>
</span></code></pre>
<div class="post__image">
    <a href="https://www.vincentprouillet.com/blog/comparing-weathers/weather_11_0.png" class="image-link" target="_blank">
        <img src="https://www.vincentprouillet.com/blog/comparing-weathers/weather_11_0.png" alt="Graph comparing 4 cities">
    </a>
</div>
<p>Looking at those graphs we can notice a few things:</p>
<ul>
<li>Montreal winter is pretty damn cold but is not really humid, which makes it not THAT bad and Canadians know how to do proper insulation. Summer is quite nice all around, nice temperatures and pretty dry.</li>
<li>Nice is good all year round, it sometimes gets below 10° but never reaches 0° while being dry. Having grown up there I feel like I have been spoiled when it comes to weather.</li>
<li>London is average but we can see the winter is very humid, which is the reason why I feel colder when it's 0° in London than -15° in Montreal.</li>
<li>Okinawa looks really good until you experience that summer humidity. For those that haven't lived in a tropical climate, it means that you are sweating an awful lot very quickly and air con is a necessity.</li>
</ul>
<p>To finish this notebook, let's have a look at the rain and snow data.</p>
<pre data-lang="python" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-python "><code class="language-python" data-lang="python"><span>
</span><span>colors </span><span style="color:#72ab00;">= </span><span>{
</span><span>    </span><span style="color:#d07711;">&#39;london&#39;</span><span>: </span><span style="color:#d07711;">&#39;green&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;nice&#39;</span><span>: </span><span style="color:#d07711;">&#39;red&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;montreal&#39;</span><span>: </span><span style="color:#d07711;">&#39;blue&#39;</span><span>,
</span><span>    </span><span style="color:#d07711;">&#39;okinawa&#39;</span><span>: </span><span style="color:#d07711;">&#39;cyan&#39;</span><span>,
</span><span>}
</span><span>
</span><span style="color:#72ab00;">def </span><span style="color:#c23f31;">bar_plot</span><span>(</span><span style="color:#5597d6;">ax</span><span>, </span><span style="color:#5597d6;">column_name</span><span>):
</span><span>    weather_2014.</span><span style="color:#5597d6;">set_index</span><span>(
</span><span>        [</span><span style="color:#d07711;">&#39;month&#39;</span><span>, </span><span style="color:#d07711;">&#39;location&#39;</span><span>]
</span><span>    ).</span><span style="color:#5597d6;">unstack</span><span>().</span><span style="color:#5597d6;">plot</span><span>(
</span><span>        </span><span style="color:#5597d6;">ax</span><span style="color:#72ab00;">=</span><span>ax,
</span><span>        </span><span style="color:#5597d6;">kind</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&#39;bar&#39;</span><span>,
</span><span>        </span><span style="color:#5597d6;">y</span><span style="color:#72ab00;">=</span><span>column_name
</span><span>    )
</span><span>
</span><span>plt.</span><span style="color:#5597d6;">figure</span><span>(</span><span style="color:#5597d6;">figsize</span><span style="color:#72ab00;">=</span><span>(</span><span style="color:#b3933a;">16</span><span>, </span><span style="color:#b3933a;">8</span><span>))
</span><span>ax </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">211</span><span>)
</span><span>
</span><span style="color:#5597d6;">bar_plot</span><span>(ax, </span><span style="color:#d07711;">&quot;raindays&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;best&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Rain days per month in 2014&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Number of rain days&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span><span>
</span><span>ax2 </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">subplot</span><span>(</span><span style="color:#b3933a;">212</span><span>)
</span><span>
</span><span style="color:#5597d6;">bar_plot</span><span>(ax2, </span><span style="color:#d07711;">&quot;snowdays&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">legend</span><span>(</span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">14</span><span>, </span><span style="color:#5597d6;">loc</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;best&quot;</span><span>)
</span><span>plt.</span><span style="color:#5597d6;">title</span><span>(</span><span style="color:#d07711;">&quot;Snow days per month in 2014&quot;</span><span>)
</span><span style="color:#5597d6;">_ </span><span style="color:#72ab00;">= </span><span>plt.</span><span style="color:#5597d6;">ylabel</span><span>(</span><span style="color:#d07711;">&quot;Number of snow days&quot;</span><span>, </span><span style="color:#5597d6;">fontsize</span><span style="color:#72ab00;">=</span><span style="color:#b3933a;">16</span><span>)
</span></code></pre>
<div class="post__image">
    <a href="https://www.vincentprouillet.com/blog/comparing-weathers/weather_13_0.png" class="image-link" target="_blank">
        <img src="https://www.vincentprouillet.com/blog/comparing-weathers/weather_13_0.png" alt="Rain and snow days">
    </a>
</div>
<p>We can see it's raining quite a bit in Okinawa since they have a rainy season (May-June) and a typhoon season (June-November).
Nice is probably the nicest, having close to no rains during summer.
When it comes to snow, Montreal is the only contender as snow in Nice and London is very rare and it hasn't snowed in Okinawa for over 30 years.</p>
<p>While weather is only one of the elements that are necessary to consider when moving (along with salary, atmosphere, friends/family etc.), it is one of the most important thing for me.
If I had to make a ranking of those cities on a weather basis, it would be:</p>
<ol>
<li>Nice</li>
<li>Montreal</li>
<li>Okinawa/London</li>
</ol>
<p>Okinawa and London are tied for completely different reasons: one has the legendary British weather and its 2 weeks of summer and the other is so hot and humid that it can be hard to breath at times (but you get amazing sea and beaches).
Now that you have seen how to use Pandas (for those that had never tried it before), it's up to you to finds things to compare. Do share them when you do as it is always interesting to read.</p>

        </div>
    </div>

    </div>

  <body>
  </body>
</html>
