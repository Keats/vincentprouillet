<!DOCTYPE html>
<html lang="en-gb">
    <head>
      <meta charset="UTF-8">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="
    Releasing Tera 0.6 and thoughts on a validation crate
">
      <meta name="author" content="Vincent Prouillet">
      <title>Vincent Prouillet: Developer &amp; Entrepreneur</title>
      <link rel="stylesheet" href="https://www.vincentprouillet.com/site.css?h=6dba58370284a334effb" />
      <link rel="shortcut icon" type="image/png" href="https://www.vincentprouillet.com/favicon.ico"/>
      <link href="https://www.vincentprouillet.com/rss.xml" rel="feed" type="application/rss+xml" title="Vincent Prouillet: Developer &amp; Entrepreneur" />
    </head>

    <header id="header">
        <h1 class="logo"><a href="/">Vincent Prouillet</a></h1>
        <ul>
            <li><a href="/blog/">Blog</a></li>
        </ul>
    </header>

    <div id="content">
        
    <div class="post">
        <div class="post__title">
            <h1>Releasing Tera 0.6 and thoughts on a validation crate</h1>
            <div class="post__meta">
                2016-12-26
                
            </div>
            <hr />
        </div>

        <div class="post__body">
            <p><a href="https://github.com/Keats/tera">Tera</a> 0.6 has been released on <a href="https://crates.io/">crates.io</a>!</p>
<p>I will let the changelog speaks for itself:</p>
<h4 id="breaking-changes">BREAKING CHANGES<a class="zola-anchor" href="#breaking-changes" aria-label="Anchor link for: breaking-changes">ðŸ”—</a></h4>
<ul>
<li><code>not</code> is now a Tera keyword</li>
</ul>
<h4 id="others">Others<a class="zola-anchor" href="#others" aria-label="Anchor link for: others">ðŸ”—</a></h4>
<ul>
<li>Added <code>#![deny(missing_docs)]</code> to the crate</li>
<li>Added <code>Tera::one_off</code> to parse and render a single template</li>
<li>Added <code>not</code> operator in conditions to mean falsiness (equivalent to <code>!</code> in Rust)</li>
<li>Remove specific error message when using <code>||</code> or <code>&amp;&amp;</code></li>
<li>Improved performances for parsing and rendering (~5-20%)</li>
<li>Added <code>precision</code> arg to <code>round</code> filter</li>
<li>Added <code>date</code> filter to format a timestamp to a date(time) string</li>
</ul>
<p>Nothing too exciting in that release except finally handling <code>not</code> in expressions.</p>
<p>I don't foresee big changes in the API coming soon anymore as we approach feature completeness from my point of view.</p>
<p>The 2 main things still lacking are:</p>
<ul>
<li><strong>custom tags</strong>: we would need to expose the renderer or the AST somehow</li>
<li><strong>i18n</strong>: no mature i18n libraries in Rust as far as I'm aware</li>
</ul>
<p>I am not using any of those in my own projects but anyone wanting to discuss them is welcome.</p>
<h2 id="validation-crate">Validation crate<a class="zola-anchor" href="#validation-crate" aria-label="Anchor link for: validation-crate">ðŸ”—</a></h2>
<p>I've been working through the <code>requirements.txt</code> of Proppy to decide what crate to work on in Rust.</p>
<p>The next one will probably be a crate similar to the <a href="https://marshmallow.readthedocs.io/en/latest/index.html">marshmallow</a> library.
Since Serde can handle the serialization/deserialization aspect already, it will focus only on actual validation with an API looking like
that:</p>
<pre data-lang="rust" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#5597d6;">derive</span><span>(Debug, Deserialize, Validate)]
</span><span style="color:#668f14;">struct </span><span style="color:#c23f31;">SignupData </span><span>{
</span><span>    #[</span><span style="color:#5597d6;">validate</span><span>(email)]
</span><span>    </span><span style="color:#5597d6;">email</span><span>: String,
</span><span>    #[</span><span style="color:#5597d6;">validate</span><span>(url)]
</span><span>    </span><span style="color:#5597d6;">site</span><span>: String,
</span><span>    #[</span><span style="color:#5597d6;">validate</span><span>(custom</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;validate_unique_username&quot;</span><span>)]
</span><span>    #[</span><span style="color:#5597d6;">validate</span><span>(</span><span style="color:#5597d6;">length</span><span>(min</span><span style="color:#72ab00;">=</span><span>2))]
</span><span>    </span><span style="color:#5597d6;">username</span><span>: String,
</span><span>    #[</span><span style="color:#5597d6;">validate</span><span>(</span><span style="color:#5597d6;">length</span><span>(min</span><span style="color:#72ab00;">=</span><span>8, max</span><span style="color:#72ab00;">=</span><span>255), custom</span><span style="color:#72ab00;">=</span><span style="color:#d07711;">&quot;validate_common_passwords&quot;</span><span>)]
</span><span>    </span><span style="color:#5597d6;">password</span><span>: String,
</span><span>}
</span></code></pre>
<p>A non-goal of that crate will be error messages as it's always a pain to handle. Errors will be referenced by a keyword
and it will be up to the frontend or the backend to write error messages in the correct format for that application.</p>
<p>The first step is figuring out how macros 1.1 work but once it's done, it seems like it will be a fairly small crate.</p>
<p>See you in 2017!</p>

        </div>
    </div>

    </div>

  <body>
  </body>
</html>
